# üéØ –¢–ó: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ QR-–∫–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–±–∞–Ω–∫ —á–µ—Ä–µ–∑ Playwright

üìπ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:** [–í–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](https://www.loom.com/share/db38601c6ce34e64b2ba30eaba5d6c14)

---

## üìã 1. –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ù—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π Playwright-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (—Ñ–æ—Ç–æ QR-–∫–æ–¥–∞) –≤ —Ñ–æ—Ä–º—É –æ–ø–ª–∞—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ –±–∞–Ω–∫–∞ –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —à–∞–≥—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –±–µ–∑ –∫–∞–ø—á–∏, –æ—à–∏–±–æ–∫ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

> **–¶–µ–ª—å:** –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –≥–∏–ø–æ—Ç–µ–∑—É, –Ω–µ –¥–µ–ª–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å.

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –ø–æ QR ([—Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é](https://www.loom.com/share/db38601c6ce34e64b2ba30eaba5d6c14))
2. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"
4. –ß–µ—Ä–µ–∑ Playwright –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª `qr_test.png`
5. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ (—Å—É–º–º–∞, –ø–æ–ª—É—á–∞—Ç–µ–ª—å, –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ)
6. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å/–û–ø–ª–∞—Ç–∏—Ç—å" (–±–µ–∑ SMS-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
7. –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
8. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å: —É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∞, –Ω–∞–ª–∏—á–∏–µ –∫–∞–ø—á–∏, –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

---

## üì¶ –ù–∞ –≤—ã—Ö–æ–¥–µ

- ‚úÖ —Ñ–∞–π–ª `run_test.js`
- ‚úÖ –º–∏–Ω–∏-README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –∑–∞–ø—É—Å–∫—É
- ‚úÖ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞)
- ‚úÖ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –ª–æ–≥

---

## ‚ùå –ß—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ

- ‚ùå –Ω–∏–∫–∞–∫–æ–≥–æ backend
- ‚ùå –Ω–∏–∫–∞–∫–∏—Ö –æ—á–µ—Ä–µ–¥–µ–π
- ‚ùå –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å SMS/2FA
- ‚ùå –Ω–µ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π

---

## üîß 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –¢–ó (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è)

### –ó–∞–¥–∞—á–∞

–°–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω Playwright-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ QR-–∫–æ–¥–∞ –≤ –≤–µ–±-—Ñ–æ—Ä–º—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–±–∞–Ω–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∞ —Ç–∞–∫–∂–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ anti-fraud —Ä–µ–∞–∫—Ü–∏–∏.

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É

#### 1. –°–∫—Ä–∏–ø—Ç `run_test.js`

–î–æ–ª–∂–µ–Ω —É–º–µ—Ç—å:

- ‚úÖ –∑–∞–ø—É—Å–∫–∞—Ç—å Chromium –≤ —Ä–µ–∂–∏–º–µ `headless: false`
- ‚úÖ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ `TEST_URL`
- ‚úÖ –∂–¥–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `domcontentloaded`
- ‚úÖ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ (`SELECTOR_UPLOAD_BUTTON`)
- ‚úÖ –ª–æ–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ `filechooser`:

```javascript
const [chooser] = await Promise.all([
  page.waitForEvent('filechooser'),
  page.click(SELECTOR_UPLOAD_BUTTON)
]);
await chooser.setFiles(QR_FILE);
```

- ‚úÖ –∂–¥–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ QR —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω:

```javascript
await page.waitForSelector(SELECTOR_SUCCESS_FIELD, { timeout: 15000 });
```

- ‚úÖ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å/–û–ø–ª–∞—Ç–∏—Ç—å"
- ‚úÖ –¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç `result.png`
- ‚úÖ –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å

---

#### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞

–í –∫–æ–¥–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```javascript
const TEST_URL = "https://bank.ru/payment/qr";
const SELECTOR_UPLOAD_BUTTON = "#uploadBtn";
const SELECTOR_FILE_INPUT = "input[type=file]";
const SELECTOR_SUCCESS_FIELD = ".recognized";
const SELECTOR_SUBMIT = ".btn-primary";
const QR_FILE = "qr_test.png";
```

---

#### 3. –û—à–∏–±–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω:

- ‚úÖ –ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `try/catch`
- ‚úÖ –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç `error.png`
- ‚úÖ –ø–∏—Å–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å:
  - `"UPLOAD_OK"` / `"UPLOAD_FAIL"`
  - `"RECOGNIZED_OK"` / `"RECOGNIZED_FAIL"`
  - `"SUBMIT_OK"` / `"SUBMIT_FAIL"`

---

